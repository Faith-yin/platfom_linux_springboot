<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.ypf.mapper.IssuesCommentMapper">

    <!--查询全部-->
    <select id="showAllIssuesComment" resultType="map">
        select issuescomment.*,user.username from issuescomment,user
        where issuescomment.userId=user.id and issuescomment.deleteFlag = 0 and user.deleteFlag = 0
    </select>

    <!--条件查询：根据归属问题issueId查询-->
    <select id="findIssuesCommentByIssuesId" parameterType="int" resultType="map">
        select issuescomment.*,user.username from issuescomment,user
        where issuescomment.userId=user.id and issuescomment.issueId=#{issueId} and issuescomment.deleteFlag = 0 and user.deleteFlag = 0
    </select>

    <!--添加-->
    <insert id="addIssuesComment" parameterType="IssuesComment">
        insert into issuescomment (issueId,userId,date,content)
        values (#{issueId},#{userId},#{date},#{content})
    </insert>

    <!--删除-->
    <update id="deleteIssuesComment" parameterType="int">
        update issuescomment set deleteFlag=1 where id=#{id} and deleteFlag=0
    </update>


</mapper>