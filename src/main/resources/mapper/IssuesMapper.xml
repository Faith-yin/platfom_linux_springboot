<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.ypf.mapper.IssuesMapper">

    <!--查询全部-->
    <select id="showAllIssues" resultType="Issues">
        select * from issues where deleteFlag = 0
    </select>

    <!--条件查询：根据提出者用户id查询-->
    <select id="findIssuesByUserId" parameterType="int" resultType="Issues">
        select * from issues where userId=#{userId} and deleteFlag=0
    </select>

    <!--添加-->
    <insert id="addIssues" parameterType="Issues">
        insert issues (title,date,userId) values (#{title},#{date},#{userId})
    </insert>

    <!--修改-->
    <update id="updateIssues" parameterType="Issues">
        update issues
        <trim prefix="set" suffixOverrides=",">
            <if test="title!=null">title=#{title}</if>
        </trim>
        where id=#{id} and deleteFlag=0
    </update>

    <!--删除-->
    <update id="deleteIssuesById" parameterType="int">
        update issues set deleteFlag=1 where id=#{id} and deleteFlag=0
    </update>



</mapper>